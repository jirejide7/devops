cd ~
sudo su
SONARQUBE=sonarqube-7.9.1
wget https://binaries.sonarsource.com/Distribution/sonarqube/$SONARQUBE.zip
apt install -y unzip
unzip $SONARQUBE.zip -d /opt
mv /opt/$SONARQUBE /opt/sonarqube -v

groupadd $SONARQUBE_GROUP
useradd --comment "Sonar System user" --home-dir /opt/sonarqube --groups $SONARQUBE_GROUP $SONARQUBE_USERNAME
chown -R $SONARQUBE_USERNAME:$SONARQUBE_GROUP /opt/sonarqube

nano /opt/sonarqube/conf/sonar.properties
sonar.jdbc.username=$POSTGRESQL_USERNAME
sonar.jdbc.password=$POSTGRESQL_PASSWORD
ctrl+x
y

nano /opt/sonarqube/bin/linux-x86-64/sonar.sh
RUN_AS_USER=$SONARQUBE_USERNAME
ctrl+x
y

su $SONARQUBE_USERNAME
cd /opt/sonarqube/bin/linux-x86-64/
./sonar.sh start
./sonar.sh status
cat /opt/sonarqube/logs/sonar.log
tail /opt/sonarqube/logs/sonar.log
exit
exit
curl localhost:9000
