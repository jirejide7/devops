# how to trigger a build from repository changes - Push
http://$JENKINS_URL:$JENKINS_PORT
- Manage Jenkins
  - Configure Global Security
    - Access Control    
      - Authorization
        - Matrix-Based security
          - Anonymous Users
            - Overall - Read
            - Job - Build, Read, Workspace    
    - CSRF Protection
      - Uncheck prevent Cross Site Request Forgery Exploits
    Save

- New Item
  - Enter an Item name > build_on_scm_push
  - Freestyle Project > OK
    - Source Code Management > Git
    - Repository URL > https://bitbucket.org/$GIT_USERNAME/$PROJECTNAME
    - Credentials > select $GIT_USERNAME/******(Bitbucket Key)
    - Build Triggers
      - Trigger builds remotely (e.g., from scripts)
        - Authentication Token - $PROJECT_NAME_TOKEN
    - Build > Add Build step > invoke top level maven targets
        - Maven Version > Maven3
        - Goals - clean install
        - Advanced
          - POM > $$PROJECTNAME/pom.xml
    Post Build Actions
    - Add post-build action
        - Archive the artifacts > Files to archive > **/*.war
    - Add post-build action
        - Record JaCoCo coverage report
    - Add post-build action
        - Deploy war/ear to a container
            - WAR/EAR files > **/*.war
            - Containers > Add container > Tomcat X.x Remote
                    - Credentials
                        - select $TOMCAT_USERNAME/******($TOMCAT_CREDENTIALS)
                    - Tomcat URL > http://localhost:$TOMCAT_PORT
    Save

https://Bitbucket.org
$USERNAME
- $PROJECTNAME
- Menu
  - Settings
    - Workflow
      - Webhooks
        - Add Webhook
          - Title - JenkinsWebhook
          - URL > $JENKINS_URL/job/$PROJECTNAME/build?token=$PROJECT_NAME_TOKEN
          - Status - Active 
          - SSL / TLS - skip certificate verification
          - Request History - Enable request history collection
          - Repository Push
          - Save
        - View Requests

# at Terminal
cd ~/$$PROJECTNAME/$$PROJECTNAME/src/main/webapp
nano index.jsp
<html>
<body>
<h2>Hi, Thanks for visiting my website. My name is Jacob Itegboje and currently I am a DevOps Engineer.</h2>
<br>
Below is a list of things I have done
<br>

- Setup EC2 instances<br>
- Setup Bitbucket repositories<br>
- Installed Git on Linux<br>
- Configured Tomcat8 Servers on Linux<br>
- Installed Java on Linux<br>
- Built Java web apps with Maven<br>
- Installed Jenkins on Linux<br>
- Configured Maven in Jenkins<br>
- Installed SonarQube, Deploy as Container and Jacoco plugins in Jenkins<br>
- Setup Bitbucket credentials in Jenkins<br>
- Setup Tomcat credentials in Jenkins<br>
- Automated build jobs in Jenkins to Poll SCM every XX minutes<br>
- Setup triggers in Jenkins with webhooks to automate build on SCM push<br>
<br>
You can reach me at XXX-XXX-XXX or $USERNAME@$DOMAIN<br> 
</body>
</html>
ctrl+x
y
git add index.jsp
git commit -m "I modified index.jsp to reflect current skill level"
git push
curl $SERVER_IP:8090/$$PROJECTNAME/

https://Bitbucket.org
- $PROJECTNAME
- Menu
  - Settings
    - Workflow
      - Webhooks
        - JenkinsWebhook - View requests
          - repo:push - View details
            - Body
              - Show request body
  - $PROJECTNAME
    - $PROJECTNAME
      - src/main/webapp/index.jsp

http://$JENKINS_URL:$JENKINS_PORT
- build_on_scm_push
  - click on build number
    - Changes
  - Console Output
